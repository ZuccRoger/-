# 错题 
---
1.  有哪些常见的服务端推送的通信解决方案？它们的优劣分别是什么？
>   1.基于轮询：
优点：开发简单，客户端实现即可，不需要服务端配合
缺点：大多数情况下无用请求，占用服务端资源
实现方式：客户端每隔一段时间调用接口，无论有没有数据，接口立即返回.
使用场景：不想折腾的开发者，消息及时性要求没那么高，服务器资源资源足。
2.基于长轮询
优点：消息及时，命中率高，消耗服务端资源少
缺点：服务端和客户端需要同时改造，消息会有部分延迟（发生在请求交替之时）
实现方式：客户端在上次请求返回后，在发送下次请求，服务端当有数据或者超时后返回，没有数据时hang住链接（超时时间需要综合考虑服务器性能和及时性做出平衡，有代理的话需要考虑代理对于链接的超时机制）。
使用场景：扫码登录，微信网页端获取消息等。
3.长链接
优点：通信及时，通信模式采用双工，类似于打电话
缺点：服务端和客户端需要同时改造，当链接过多时，消耗服务端资源比较大。
实现方式：客户端和服务端建立长链接，基于http1.1 ,keepalive ,websocket,comet，iframe等，基于socket的需要维持心跳
使用场景：实时性要求很高，银行系统，股票系统等

---

2.  跨域请求中，需要设置哪个属性为true,才能携带cookie信息？
>   实际上，这是浏览器的同源策略导致的问题：不允许JS访问跨域的Cookie。举个例子，现有网站A使用域名a.example.com，网站B使用域名b.example.com，如果希望在2个网站之间共享Cookie（浏览器可以将Cookie发送给服务器），那么在设置的Cookie的时候，必须设置domain为example.com。因此要跨域共享cookie需要双边都设置
>1.服务器端使用CROS协议解决跨域访问数据问题时，需要设置响应消息头Access-Control-Allow-Credentials值为“true”。同时，还需要设置响应消息头Access-Control-Allow-Origin值为指定单一域名（注：不能为通配符“*”）。
>2.客户端需要设置Ajax请求属性withCredentials=true，让Ajax请求都带上Cookie。

---
3. 从输入url到页面展现发生了什么？其中在页面渲染以及网络请求响应的性能优化方面，我们分别可以做哪些优化工作？
>    输入url按下回车之后，浏览器会去浏览器缓存中寻找该url的ip；没有的话去系统缓存中找，还是没有的话去路由器缓存中寻找；再没有就去系统host文件中找，还是没有最后只能去请求dns服务器，然后dns给一个ip给浏览器；浏览器根据这个ip地址，将请求信息，请求说明和请求参数等封成一个tcp包，由传输层，到网络层，到数据链路层到物理层，传送给服务器，服务器解析这个tcp包将对应的页面文件返回。浏览器根据html文件生成dom树，根据css文件生成cssom树，然后合并这两棵树生成渲染树，然后渲染页面并且展示。要注意的是，当浏览器解析html文件时候如果遇到了内联或者外联的js代码，会暂停dom树的生成，等js代码执行完成之后，才能继续生成树并渲染。
        其中在页面渲染以及网络请求响应的性能优化方面，我们可以做的优化工作有：1.js代码写在页面渲染完成之后避免阻塞渲染    2.cdn并发，资源压缩，减少请求次数    3.预加载或者懒加载  
---
4.  JWT（JSON WEB TOKEN）
>   1.  统的session认证
    每个用户都会生成一个session，服务端会记录，并且保存在内存中，随着用户的增多，服务端的开销会很大
    如果分布式的化，其他的服务器内存中没有该session，所以限制了负载均衡的能力
    并且csrf攻击是给予cookie的，如果cookie被截获，有危险
>   2.  token则是每次请求都会带上
    服务端支持Access-Control-Allow-Origin:*
>   3.  jwt组成
    头部+荷载+签证


---
5.  ####    cookie属性
>   ######   httpOnly
   	如果给某个 cookie 设置了 httpOnly 属性，则无法通过 JS 脚本 读取到该 cookie 的信息，但还是能通过 Application 中手动修改 cookie，所以只是在一定程度上可以防止 XSS 攻击，不是绝对的安全
>   ######  secure
	该 cookie 是否仅被使用安全协议传输。安全协议有 HTTPS，SSL等，在网络上传输数据之前先将数据加密。默认为false。
    当 secure 值为 true 时，cookie 在 HTTP 中是无效，在 HTTPS 中才有效。

---
6.  session
    *   session是基于cookie实现的
    *   session会被存储在服务端，sessionId会被存储在客户端的cookie中
    *   分布式很差在